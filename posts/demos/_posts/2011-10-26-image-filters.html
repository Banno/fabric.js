---
layout: demo
title: Image Filters
---

<style>
  .controls { display: inline-block; background: #fafafa; margin-left: 10px; padding: 15px; border-left: 1px dotted #aaa; height: 270px }
  .canvas-container { display: inline-block; vertical-align: top; }
</style>

<canvas id="c" width="500" height="500"></canvas>
<div class="controls">
  <h3>Filters:</h3>
  <p>
    <label><span>Grayscale:</span> <input type="checkbox" id="grayscale"></label>
  </p>
  <p>
    <label><span>Invert:</span> <input type="checkbox" id="invert"></label>
  </p>
  <p>
    <label><span>Remove white:</span> <input type="checkbox" id="remove-white"></label>
    <br>
    <label>Threshold: <input type="range" id="remove-white-threshold" value="60" min="0" max="255"></label>
    <br>
    <label>Distance: <input type="range" id="remove-white-distance" value="10" min="0" max="255"></label>
  </p>
</div>

<script id="main">var $ = function(id){return document.getElementById(id)};

var canvas = new fabric.Canvas('c', { backgroundImage: '../lib/bg.png' });

var oImg;
fabric.Image.fromURL('../assets/logo.png', function(img) {
  oImg = img.set({ left: 250, top: 250, angle: -10 })
  canvas.add(oImg);
  canvas.renderAll();
});

$('grayscale').onclick = function() {
  oImg.filters[0] = this.checked ? new fabric.Image.filters.Grayscale() : null;
  oImg.applyFilters(canvas.renderAll.bind(canvas));
};

$('invert').onclick = function() {
  oImg.filters[1] = this.checked ? new fabric.Image.filters.Invert() : null;
  oImg.applyFilters(canvas.renderAll.bind(canvas));
};

$('remove-white').onclick = function () {
  oImg.filters[2] = this.checked ? new fabric.Image.filters.RemoveWhite({ 
    threshold: $('remove-white-threshold').value, 
    distance: $('remove-white-distance').value 
  }) : null;
  oImg.applyFilters(canvas.renderAll.bind(canvas));
};

$('remove-white-threshold').onchange = function() {
  oImg.filters[2] && (oImg.filters[2].threshold = this.value);
  oImg.applyFilters(canvas.renderAll.bind(canvas));
};

$('remove-white-distance').onchange = function() {
  oImg.filters[2] && (oImg.filters[2].distance = this.value);
  oImg.applyFilters(canvas.renderAll.bind(canvas));
};
</script>